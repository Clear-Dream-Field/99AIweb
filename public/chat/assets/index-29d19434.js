import{d as G,n as O,u as A,t as a,F as X,G as Y,w as Z}from"./index-37571bdf.js";import{d as L,_ as ee,a as te}from"./wallet.vue_vue_type_script_setup_true_lang-6c3231a5.js";import{u as se}from"./crami-5268e9d9.js";import{d as H,e as r,r as f,f as E,R as i,S as m,a2 as t,U as p,V as l,c as v,a4 as s,L as e,a6 as x,W as o,a3 as ae,H as ne}from"./vue-e24f8b5f.js";import{y as h,B as Q,e as oe,J as le,K as ie,H as S,F as re,t as I,L as ce,C as ue,D as de,E as j,G as pe}from"./naive-ui-f0646687.js";import"./vueuse-motion-a01cecd6.js";const fe={class:"flex flex-col justify-center items-center"},me={class:"text-2xl text-primary self-start mb-3 flex justify-between w-full"},xe=t("span",null,null,-1),_e={class:"mt-3 text-lg text-[#555]"},ve={class:"text-[#95aac9] mt-2"},he={class:"self-start"},ge={class:"flex pl-3 pt-3 text-base font-bold text-primary"},ye={key:0,class:"flex pl-3 pt-3 text-base font-bold text-primary"},be={class:"flex items-center space-x-4 pl-3 mt-3"},ke={class:"flex-shrink-0 w-24 text-primary"},we={class:"w-[200px]"},Ce={class:"flex items-center space-x-4 pl-3 mt-3"},$e={class:"flex-shrink-0 w-24 text-primary"},Ne={class:"w-[200px]"},Be={class:"flex items-center space-x-4 pl-3 mt-3"},Se={class:"flex-shrink-0 w-24 text-primary"},Ie={class:"w-[200px]"},Le={key:1,class:"flex items-center space-x-4 pl-3 mt-3"},Me={class:"flex-shrink-0 w-24 text-primary"},De={class:"w-[200px]"},We={key:1},Te=H({__name:"detail",setup(F){const u=G(),n=O(),{userBalance:_}=u,$=A(),y=r(()=>u.userInfo.email||""),M=r(()=>u.userInfo.isBindWx),D=f(u.userInfo.avatar??L),W=f(u.userInfo.username??a("usercenter.notLoggedIn"));f(u.userInfo.sign??a("usercenter.defaultSignature"));const T=r(()=>Number(u.globalConfig.wechatRegisterStatus)===1);function C(){u.logOut(),n.replace("/")}const g=r(()=>u.isLogin);return E(()=>{g.value||u.setLoginDialog(!0)}),(N,b)=>(i(),m("div",fe,[t("div",me,[xe,g.value?(i(),p(e(h),{key:0,tertiary:"",type:"error",onClick:C},{default:l(()=>[v(s(e(a)("usercenter.logOut")),1)]),_:1})):x("",!0),g.value?x("",!0):(i(),p(e(h),{key:1,tertiary:"",type:"success",onClick:b[0]||(b[0]=k=>e(u).setLoginDialog(!0))},{default:l(()=>[v(s(e(a)("usercenter.clickToLogin")),1)]),_:1}))]),o(e(Q),{size:148,src:D.value,"fallback-src":e(L)},null,8,["src","fallback-src"]),t("b",_e,s(W.value),1),t("span",ve,s(y.value),1),t("div",he,[t("div",ge,[t("span",null,s(e(a)("usercenter.myUsageRecord")),1)]),e(_).expirationTime?(i(),m("div",ye,[t("span",null,s(e(a)("usercenter.membershipExpiration")),1),t("span",null,s(e(_).expirationTime),1)])):x("",!0),t("div",be,[t("span",ke,s(e(a)("usercenter.basicModelCredits")),1),t("div",we,s(e(_).sumModel3Count||"0")+" "+s(e(a)("usercenter.points")),1)]),t("div",Ce,[t("span",$e,s(e(a)("usercenter.advancedModelCredits")),1),t("div",Ne,s(e(_).sumModel4Count||"0")+" "+s(e(a)("usercenter.points")),1)]),t("div",Be,[t("span",Se,s(e(a)("usercenter.drawingUsageCredits")),1),t("div",Ie,s(e(_).sumDrawMjCount||"0")+" "+s(e(a)("usercenter.points")),1)]),T.value?(i(),m("div",Le,[t("span",Me,s(e(a)("usercenter.bindWeChat")),1),t("div",De,[M.value?(i(),m("span",We,s(e(a)("usercenter.weChatBound")),1)):(i(),p(e(h),{key:0,text:"",onClick:b[1]||(b[1]=k=>e($).updateBindwxDialog(!0))},{default:l(()=>[v(s(e(a)("usercenter.clickToBindWeChat")),1)]),_:1}))])])):x("",!0)])]))}}),Ue={class:"flex flex-col justify-center items-center"},ze={class:"text-2xl text-primary self-start mb-14 flex justify-between w-full"},Ve={class:"mt-3 text-lg text-[#555]"},Pe={class:"self-start mt-16"},Re={class:"text-xl text-primary"},je={class:"flex items-center space-x-4 pl-3 mt-3"},Ge={class:"flex-shrink-0 w-[150px] text-keft text-primary"},Oe={class:"w-[230px]"},Ae={class:"flex items-center space-x-4 pl-3 mt-3"},He={class:"flex-shrink-0 w-[150px] text-keft text-primary"},Ee={class:"w-[230px]"},Qe={key:0,class:"flex items-center space-x-4 pl-3 mt-3"},Fe={class:"flex-shrink-0 w-[150px] text-keft text-primary"},Je={class:"w-[230px]"},Ke={key:1},qe={key:1,class:"flex items-center space-x-4 pl-3 mt-3"},Xe={class:"flex-shrink-0 w-[150px] text-keft text-primary"},Ye={class:"w-[230px]"},Ze={key:0,class:"flex text-[red] pt-8 text-base font-bold"},et={key:1},tt={class:"flex items-center space-x-4"},st={class:"flex-shrink-0 w-[60px]"},at={class:"flex-1"},nt={class:"flex items-center space-x-4 mt-5"},ot={class:"flex-shrink-0 w-[60px]"},lt={class:"flex-1"},ft=H({__name:"index",setup(F){const u=A(),n=G(),_=O(),$=f(0),y=r(()=>n.userBalance),M=r(()=>{var d;return(d=n.globalConfig)==null?void 0:d.isUseWxLogin}),D=r(()=>Number(n.globalConfig.wechatRegisterStatus)===1),W=r(()=>n.globalConfig.model3Name||a("goods.basicModelQuota")),T=r(()=>n.globalConfig.model4Name)||a("goods.advancedModelQuota");r(()=>n.globalConfig.drawMjName)||a("goods.drawingQuota"),r(()=>Number(n.globalConfig.isHideModel3Point)===1),r(()=>Number(n.globalConfig.isHideModel4Point)===1),r(()=>Number(n.globalConfig.isHideDrawMjPoint)===1);const C=f(!0),g=r(()=>n.isLogin),N=oe();r(()=>n.userInfo.email||"");const b=r(()=>n.userInfo.isBindWx),k=f(n.userInfo.avatar??L),B=f(n.userInfo.username??"未登录");f(n.userInfo.sign??a("usercenter.defaultSignature"));const U=f(!1),{isSmallLg:z,isMobile:V}=se();async function P(){const d=await X();$.value=d.data||0}async function J(){(await Y()).success&&N.success(a("usercenter.syncComplete")),P()}async function R(d){try{U.value=!0;const c=await Z(d);if(U.value=!1,!c.success)return N.error(c.message);N.success(a("common.updateUserSuccess")),n.getUserInfo()}catch{U.value=!1}}function K(){g.value||(_.replace("/"),n.setLoginDialog(!0))}E(()=>{K(),P()});function q(){n.logOut(),_.replace("/")}return setTimeout(()=>{C.value=!1},500),(d,c)=>(i(),p(e(le),{"has-sider":"",class:"flex h-full"},{default:l(()=>[e(z)?x("",!0):(i(),p(e(ie),{key:0,"content-style":"padding: 24px;",bordered:"",width:"380"},{default:l(()=>[t("div",Ue,[t("div",ze,[t("span",null,s(e(a)("usercenter.personalCenter")),1),o(e(h),{tertiary:"",type:"error",onClick:q},{default:l(()=>[v(s(e(a)("usercenter.logOut")),1)]),_:1})]),o(e(Q),{size:148,src:k.value,"fallback-src":e(L)},null,8,["src","fallback-src"]),t("b",Ve,s(B.value),1),t("div",Pe,[t("div",Re,s(e(a)("usercenter.myUsageRecord")),1),t("div",je,[t("span",Ge,s(W.value),1),t("div",Oe,s(y.value.useModel3Count||"0")+" "+s(e(a)("usercenter.points")),1)]),t("div",Ae,[t("span",He,s(e(T)),1),t("div",Ee,s(y.value.useModel4Count||"0")+" "+s(e(a)("usercenter.points")),1)]),M.value&&D.value?(i(),m("div",Qe,[t("span",Fe,s(e(a)("usercenter.bindWeChat")),1),t("div",Je,[b.value?(i(),m("span",Ke,s(e(a)("usercenter.weChatBound")),1)):(i(),p(e(h),{key:0,text:"",onClick:c[0]||(c[0]=w=>e(u).updateBindwxDialog(!0))},{default:l(()=>[v(s(e(a)("usercenter.clickToBindWeChat")),1)]),_:1}))])])):x("",!0),$.value>0?(i(),m("div",qe,[t("span",Xe,s(e(a)("usercenter.clickToBindWeChat")),1),t("div",Ye,[o(e(h),{text:"",onClick:J},{default:l(()=>[v(s(e(a)("usercenter.syncVisitorData")),1)]),_:1})])])):x("",!0)])]),y.value.expirationTime?(i(),m("div",Ze,[t("span",null,s(e(a)("usercenter.membershipExpiration")),1),t("span",null,s(y.value.expirationTime),1)])):x("",!0)]),_:1})),t("div",{class:ae(["flex flex-col",[e(V)?"w-full":"flex-1"]]),style:ne({padding:e(V)?"10px":"0 28px 0 28px"})},[o(e(pe),{type:"line",animated:"",class:"mt-5 flex-1"},{default:l(()=>[e(z)?(i(),p(e(S),{key:0,name:"detail",tab:e(a)("usercenter.myDetails")},{default:l(()=>[o(Te)]),_:1},8,["tab"])):x("",!0),o(e(S),{name:"account",tab:e(a)("usercenter.myWallet")},{default:l(()=>[o(ee)]),_:1},8,["tab"]),o(e(S),{name:"baseInfo",tab:e(a)("usercenter.basicInfo")},{default:l(()=>[o(e(re),null,{header:l(()=>[C.value||!g.value?(i(),p(e(I),{key:0,size:"medium",width:"20%"})):(i(),m("div",et,s(e(a)("usercenter.userBasicSettings")),1))]),default:l(()=>[C.value||!g.value?(i(),p(e(ce),{key:0,vertical:""},{default:l(()=>[o(e(I),{height:"40px",size:"medium"}),o(e(I),{height:"40px",size:"medium"}),o(e(I),{height:"80px",size:"medium"})]),_:1})):(i(),p(e(ue),{key:1,"x-gap":"12",cols:1},{default:l(()=>[o(e(de),null,{default:l(()=>[t("div",tt,[t("span",st,s(d.$t("setting.avatarLink")),1),t("div",at,[o(e(j),{value:k.value,"onUpdate:value":c[1]||(c[1]=w=>k.value=w),placeholder:e(a)("usercenter.avatarPlaceholder")},null,8,["value","placeholder"])]),o(e(h),{size:"tiny",text:"",type:"primary",onClick:c[2]||(c[2]=w=>R({avatar:k.value}))},{default:l(()=>[v(s(d.$t("common.update")),1)]),_:1})]),t("div",nt,[t("span",ot,s(d.$t("setting.name")),1),t("div",lt,[o(e(j),{value:B.value,"onUpdate:value":c[3]||(c[3]=w=>B.value=w),placeholder:e(a)("usercenter.usernamePlaceholder"),maxlength:"12","show-count":"",clearable:""},null,8,["value","placeholder"])]),o(e(h),{size:"tiny",text:"",type:"primary",onClick:c[4]||(c[4]=w=>R({username:B.value}))},{default:l(()=>[v(s(d.$t("common.update")),1)]),_:1})])]),_:1})]),_:1}))]),_:1})]),_:1},8,["tab"]),o(e(S),{name:"password",tab:e(a)("usercenter.passwordManagement")},{default:l(()=>[o(te)]),_:1},8,["tab"])]),_:1})],6)]),_:1}))}});export{ft as default};

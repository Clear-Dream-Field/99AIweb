import{d as J,r as h,R as v,U as N,V as a,a2 as t,a4 as r,L as e,W as l,af as W,a8 as de,c,e as g,j as ce,f as ue,S as L,a6 as $,F as E,a7 as K}from"./vue-e24f8b5f.js";import{t as s,d as O,H as ie,J as fe}from"./index-37571bdf.js";import{u as X,a as pe,f as me}from"./crami-5268e9d9.js";import{e as Z,D as H,w as ge,M as Y,E as V,y as b,C as ee,F as y,d as ve,O as U,P as F,Q as he,R as _e,S as we,T as ye}from"./naive-ui-f0646687.js";const ds=""+new URL("avatar-e985e5ec.png",import.meta.url).href,xe={class:"flex justify-between"},be={class:"text-[#95AAC9]"},Ce={class:"text-base"},ke={class:"text-[#95AAC9] mt-3"},Pe={class:"ml-3 text-[#95AAC9] mt-2"},Ne={class:"ml-3 text-[#95AAC9] mt-2"},Se={class:"ml-3 text-[#95AAC9] mt-2"},cs=J({__name:"password",setup(se){const m=h({password:"",reenteredPassword:""}),_=m,u=h(null),C=h(null),w={password:[{required:!0,message:s("usercenter.enterPassword")}],reenteredPassword:[{required:!0,message:s("usercenter.reenterPassword"),trigger:["input","blur"]},{validator:k,message:s("usercenter.passwordsNotMatch"),trigger:"input"},{validator:S,message:s("usercenter.passwordsNotMatch"),trigger:["blur","password-input"]}]};function k(i,o){return!!m.value.password&&m.value.password.startsWith(o)&&m.value.password.length>=o.length}function S(i,o){return o===m.value.password}function M(){var i;m.value.reenteredPassword&&((i=C.value)==null||i.validate({trigger:"password-input"}))}const{isSmallXl:j}=X(),A=O(),z=Z();async function D(i){await ie(i),z.success(s("usercenter.passwordUpdateSuccess")),T(),A.updatePasswordSuccess()}function T(){m.value={password:"",reenteredPassword:""}}function R(i){var o;i.preventDefault(),(o=u.value)==null||o.validate(async f=>{if(!f){const{password:B}=m.value;D({password:B})}})}return(i,o)=>(v(),N(e(y),null,{header:a(()=>[t("div",null,r(e(s)("usercenter.changeYourPassword")),1)]),default:a(()=>[l(e(ee),{"x-gap":24,"y-gap":24,cols:e(j)?1:3,class:"mt-3"},{default:a(()=>[l(e(H),{class:"border rounded-sm p-3 dark:border-[#ffffff17]",span:"2"},{default:a(()=>[l(e(ge),{ref_key:"formRef",ref:u,model:e(_),rules:w},{default:a(()=>[l(e(Y),{path:"password",label:e(s)("usercenter.newPassword")},{default:a(()=>[l(e(V),{value:e(_).password,"onUpdate:value":o[0]||(o[0]=f=>e(_).password=f),type:"password",onInput:M,onKeydown:o[1]||(o[1]=W(de(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1},8,["label"]),l(e(Y),{ref_key:"rPasswordFormItemRef",ref:C,first:"",path:"reenteredPassword",label:e(s)("usercenter.confirmPassword")},{default:a(()=>[l(e(V),{value:e(_).reenteredPassword,"onUpdate:value":o[2]||(o[2]=f=>e(_).reenteredPassword=f),disabled:!e(_).password,type:"password",tabindex:"0",onKeyup:W(R,["enter"])},null,8,["value","disabled"])]),_:1},8,["label"]),t("div",xe,[t("span",be,r(e(s)("usercenter.reloginAfterPasswordChange")),1),l(e(b),{disabled:e(_).password===null,type:"primary",onClick:R},{default:a(()=>[c(r(e(s)("usercenter.updateYourPassword")),1)]),_:1},8,["disabled"])])]),_:1},8,["model"])]),_:1}),l(e(H),{class:"border rounded-sm p-3 dark:border-[#ffffff17]"},{default:a(()=>[t("b",Ce,r(e(s)("usercenter.passwordRequirements")),1),t("p",ke,r(e(s)("usercenter.newPasswordInstructions")),1),t("div",Pe,r(e(s)("usercenter.minimumCharacters")),1),t("div",Ne,r(e(s)("usercenter.maximumCharacters")),1),t("div",Se,r(e(s)("usercenter.requireNumber")),1)]),_:1})]),_:1},8,["cols"])]),_:1}))}}),Me={1:s("rechargeTypes.1"),2:s("rechargeTypes.2"),3:s("rechargeTypes.3"),4:s("rechargeTypes.4"),5:s("rechargeTypes.5"),6:s("rechargeTypes.6"),7:s("rechargeTypes.7"),8:s("rechargeTypes.8")};s("orderStatus.0"),s("orderStatus.1"),s("orderStatus.2"),s("orderStatus.3");const Ae={class:"flex h-full flex-col"},ze={class:"text-lg font-bold"},De={class:"flex flex-wrap gap-4 p-2"},Te={class:"flex flex-col items-center"},Re={class:"flex flex-col items-center"},je={class:"flex flex-col items-center"},Ie={class:"flex flex-col"},$e={class:"flex flex-wrap gap-3 items-center"},Ue={class:"flex gap-2"},Be={class:"text-lg font-bold"},Le={class:"flex items-center"},Fe={class:"relative"},He=["src"],Ve={class:"text-sm text-gray-500 line-clamp-2 h-[40px]"},qe={class:"grid grid-cols-3 gap-2 mt-3"},Ge={class:"flex flex-col items-center bg-gray-50 dark:bg-gray-800 p-2 rounded"},Qe={class:"text-xs text-gray-500"},We={class:"font-bold"},Ee={class:"flex flex-col items-center bg-gray-50 dark:bg-gray-800 p-2 rounded"},Ke={class:"text-xs text-gray-500"},Ye={class:"font-bold"},Je={class:"flex flex-col items-center bg-gray-50 dark:bg-gray-800 p-2 rounded"},Oe={class:"text-xs text-gray-500"},Xe={class:"font-bold"},Ze={class:"flex justify-between items-center mt-3"},us=J({__name:"wallet",setup(se){const{isSmallMd:m,isMobile:_}=X(),u=O(),C=Z();ve();const w=g(()=>u.userBalance),k=h(!1),S=h(""),M=h(!1),j=h([]),A=h(!1),z=g(()=>u.globalConfig.model3Name||s("usercenter.basicModelQuota")),D=g(()=>u.globalConfig.model4Name)||s("usercenter.advancedModelQuota"),T=g(()=>u.globalConfig.drawMjName)||s("usercenter.mjDrawingQuota"),R=g(()=>Number(u.globalConfig.isHideModel3Point)===1),i=g(()=>Number(u.globalConfig.isHideModel4Point)===1),o=g(()=>Number(u.globalConfig.isHideDrawMjPoint)===1),f=ce({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,20,50],onChange:n=>{f.page=n,I()},onUpdatePageSize:n=>{f.pageSize=n,f.page=1,I()}}),B=g(()=>{const n=[{title:s("usercenter.orderNumber"),key:"uid"},{title:s("usercenter.rechargeType"),key:"rechargeType",render(p){return Me[p.rechargeType]}},{title:s("usercenter.validity"),key:"expireDateCn"},{title:s("usercenter.rechargeTime"),key:"createdAt",render(p){return p.createdAt instanceof Date?p.createdAt.toLocaleString():String(p.createdAt)}}];return R.value||n.splice(2,0,{title:z.value,key:"model3Count"}),i.value||n.splice(3,0,{title:D.value,key:"model4Count"}),o.value||n.splice(4,0,{title:T.value,key:"drawMjCount"}),n}),q=h([]);async function I(){A.value=!0;try{const n=await fe({page:f.page,size:f.pageSize}),{rows:p}=n.data;q.value=p}finally{A.value=!1}}async function ae(){C.warning(s("usercenter.enterCardSecret"));try{k.value=!0,await pe({code:S.value}),C.success(s("usercenter.cardRedeemSuccess")),I(),u.getUserInfo(),k.value=!1}catch{C.error(s("usercenter.unknownError")),k.value=!1}}function te(){M.value=!0}async function re(){const n=await me({status:1,size:30});j.value=n.data.rows}const G=g(()=>{var n;return(n=u.globalConfig)==null?void 0:n.buyCramiAddress});function le(){window.open(G.value)}return ue(()=>{I()}),(n,p)=>(v(),L("div",Ae,[l(e(y),null,{header:a(()=>[t("div",ze,r(e(s)("usercenter.userWalletBalance")),1)]),default:a(()=>[t("div",De,[R.value?$("",!0):(v(),N(e(y),{key:0,class:"flex-1 min-w-[220px] transition-all hover:shadow-md dark:hover:shadow-[#ffffff17]",bordered:!1,size:"small"},{default:a(()=>[t("div",Te,[l(e(U),{type:"info",class:"text-base"},{default:a(()=>[c(r(z.value),1)]),_:1}),l(e(F),{value:w.value.sumModel3Count>99999?"∞":w.value.sumModel3Count??0},null,8,["value"])])]),_:1})),i.value?$("",!0):(v(),N(e(y),{key:1,class:"flex-1 min-w-[220px] transition-all hover:shadow-md dark:hover:shadow-[#ffffff17]",bordered:!1,size:"small"},{default:a(()=>[t("div",Re,[l(e(U),{type:"success",class:"text-base"},{default:a(()=>[c(r(e(D)),1)]),_:1}),l(e(F),{value:w.value.sumModel4Count>99999?"∞":w.value.sumModel4Count??0},null,8,["value"])])]),_:1})),o.value?$("",!0):(v(),N(e(y),{key:2,class:"flex-1 min-w-[220px] transition-all hover:shadow-md dark:hover:shadow-[#ffffff17]",bordered:!1,size:"small"},{default:a(()=>[t("div",je,[l(e(U),{type:"warning",class:"text-base"},{default:a(()=>[c(r(e(T)),1)]),_:1}),l(e(F),{value:w.value.sumDrawMjCount>99999?"∞":w.value.sumDrawMjCount??0},null,8,["value"])])]),_:1}))]),l(e(y),{class:"mt-4",size:"small"},{default:a(()=>[t("div",Ie,[l(e(U),{type:"primary",class:"text-base font-medium mb-3"},{default:a(()=>[c(r(e(s)("usercenter.cardRecharge")),1)]),_:1}),t("div",$e,[l(e(V),{value:S.value,"onUpdate:value":p[0]||(p[0]=d=>S.value=d),placeholder:e(s)("usercenter.enterCardDetails"),class:"flex-1 min-w-[200px]",maxlength:"128","show-count":"",clearable:""},null,8,["value","placeholder"]),t("div",Ue,[l(e(b),{type:"primary",loading:k.value,onClick:ae},{default:a(()=>[c(r(e(s)("usercenter.exchange")),1)]),_:1},8,["loading"]),G.value?(v(),N(e(b),{key:0,type:"success",onClick:te},{default:a(()=>[c(r(e(s)("usercenter.buyCardSecret")),1)]),_:1})):$("",!0)])])])]),_:1})]),_:1}),l(e(y),{class:"mt-5 flex-1"},{header:a(()=>[t("div",Be,r(e(s)("usercenter.rechargeRecords")),1)]),default:a(()=>[l(e(he),{columns:B.value,loading:A.value,"scroll-x":800,data:q.value,"max-height":"280",pagination:f},{pagination:a(({pageCount:d,page:x,itemCount:es,onUpdatePage:Q,prefix:ss,suffix:as,onUpdatePageSize:oe,pageSize:ne})=>[t("div",Le,[c(r(x)+"/"+r(d)+"     ",1),l(e(b),{size:"small",disabled:x<=1,onClick:P=>Q(x-1)},{default:a(()=>[c(r(e(s)("usercenter.previousPage")),1)]),_:2},1032,["disabled","onClick"]),l(e(b),{size:"small",class:"ml-1",disabled:x>=d,onClick:P=>Q(x+1)},{default:a(()=>[c(r(e(s)("usercenter.nextPage")),1)]),_:2},1032,["disabled","onClick"]),c("   "+r(e(s)("usercenter.pageSize"))+": ",1),(v(),L(E,null,K([10,20,50],P=>l(e(b),{key:P,size:"small",class:"ml-1",type:P===ne?"primary":"default",onClick:ts=>oe(P)},{default:a(()=>[c(r(P)+" "+r(e(s)("usercenter.itemsPerPage")),1)]),_:2},1032,["type","onClick"])),64))])]),_:1},8,["columns","loading","data","pagination"])]),_:1}),l(e(ye),{show:M.value,"onUpdate:show":p[1]||(p[1]=d=>M.value=d),width:e(m)?"100%":502,"on-after-enter":re},{default:a(()=>[l(e(_e),{title:e(s)("usercenter.packagePurchase"),closable:""},{default:a(()=>[l(e(ee),{"x-gap":15,"y-gap":15,cols:e(m)?1:2,class:"mt-3"},{default:a(()=>[(v(!0),L(E,null,K(j.value,(d,x)=>(v(),N(e(H),{key:x},{default:a(()=>[l(e(y),{size:"small",embedded:"",class:"transition-all hover:shadow-md dark:hover:shadow-[#ffffff17]"},{header:a(()=>[t("div",Fe,[t("b",null,r(d.name),1)])]),cover:a(()=>[t("img",{src:d.coverImg,class:"w-full object-cover h-[120px]"},null,8,He)]),default:a(()=>[t("div",null,[t("p",Ve,r(d.des),1),t("div",qe,[t("div",Ge,[t("span",Qe,r(z.value),1),t("span",We,r(d.model3Count),1)]),t("div",Ee,[t("span",Ke,r(e(D)),1),t("span",Ye,r(d.model4Count),1)]),t("div",Je,[t("span",Oe,r(e(T)),1),t("span",Xe,r(d.drawMjCount),1)])]),t("div",Ze,[l(e(we),{type:"error",size:"large",class:"text-lg"},{default:a(()=>[c(r(`￥${d.price}`),1)]),_:2},1024),l(e(b),{type:"primary",size:"small",onClick:le},{default:a(()=>[c(r(e(s)("usercenter.buyPackage")),1)]),_:1})])])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["cols"])]),_:1},8,["title"])]),_:1},8,["show","width"])]))}});export{us as _,cs as a,ds as d};
